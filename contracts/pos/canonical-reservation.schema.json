{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://forkknife.ge/schemas/canonical-reservation.json",
  "title": "Canonical Reservation",
  "description": "Standard reservation format for Fork & Knife API â†” POS Connector communication",
  "type": "object",
  "required": [
    "reservation_id",
    "restaurant_vendor_id",
    "start_at",
    "party_size",
    "guest",
    "source"
  ],
  "properties": {
    "reservation_id": {
      "type": "string",
      "description": "Fork & Knife reservation ID (cuid)"
    },
    "vendor_reservation_id": {
      "type": "string",
      "description": "POS system's reservation ID (if exists)"
    },
    "restaurant_vendor_id": {
      "type": "string",
      "description": "Restaurant's ID in the POS system"
    },
    "start_at": {
      "type": "string",
      "format": "date-time",
      "description": "Reservation start time (ISO 8601)"
    },
    "party_size": {
      "type": "integer",
      "minimum": 1,
      "maximum": 50
    },
    "guest": {
      "type": "object",
      "required": ["name", "phone"],
      "properties": {
        "name": { "type": "string" },
        "phone": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        },
        "notes": { "type": "string" }
      }
    },
    "table_pref": {
      "type": "string",
      "description": "Seating preference (window, patio, bar, etc.)"
    },
    "occasion": {
      "type": "string",
      "description": "Special occasion (birthday, anniversary, etc.)"
    },
    "source": {
      "type": "string",
      "enum": ["fork-knife", "pos", "walk-in"]
    },
    "hold": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["deposit", "prepay"]
        },
        "amount_minor": {
          "type": "integer",
          "description": "Amount in smallest currency unit (cents/tetri)"
        },
        "currency": { "type": "string" },
        "status": { "type": "string" }
      }
    }
  }
}

